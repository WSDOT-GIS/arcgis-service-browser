{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/urlUtils.ts","webpack:///./src/colorUtils.ts","webpack:///./src/index.ts","webpack:///./src/arcGisServerRequests.ts","webpack:///./src/UnexpectedUrlFormatError.ts","webpack:///./src/datumUtils.ts","webpack:///./src/Layer.ts","webpack:///./src/legend.ts","webpack:///./src/symbols.ts","webpack:///./node_modules/webfontloader/webfontloader.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","UnexpectedUrlFormatError_1","getUrlSearchParam","URLSearchParams","location","search","getServerRoot","url","re","match","UnexpectedUrlFormatError","getServiceUrl","wrapUrl","arcGisUrl","appUrl","href","URL","searchParams","set","toString","getServiceUrlParts","svcUrlRe","_a","__read","rootUrl","folder","serviceName","serviceType","layerId","service","join","root","layer","tool","gpMatch","_b","toolName","serverRootUrl","rgbToHex","rgb","map","isHexString","test","rgbaArrayToCssRgb","rgba","g","b","a","colorToDom","input","document","createElement","type","disabled","_this","this","webfontloader_1","arcGisServerRequests_1","colorUtils_1","datumUtils_1","Layer_1","legend_1","symbols_1","urlUtils_1","arrayToElement","arr","propertyName","currentUrl","isLayersUrl","createLayerList","objects","table","classList","add","hRow","createTHead","insertRow","body","createTBody","fieldNames","Set","objects_1","__values","objects_1_1","next","done","obj","propName","forEach","fn","th","innerText","appendChild","bRow","cell","insertCell","svcUrl","hrefUrl","id","domElement","toDomElement","cellContentElement","childElementCount","arrayToTable","linkList_1","linkItem","urlParams","textContent","li","createLegendList","serviceUrl_1","links","taskName","taskList_1","link","list","item","element","filter","undefined","createTextNode","Element","target","createDatumXFormTable","symbolImg","symbolToDom","Array","isArray","Date","dl","dt","dd","content","urlParts","breadcrumbs","partName","pageUrl","querySelector","createBreadcrumbs","load","google","families","__awaiter","serverUrl","legendUrlRe","mainSection","console","warn","getServerInfo","serverInfo","sent","legendDom","createLegendDom","linksList","createAnchor","createListItem","wrap","createLinksList","contentElement","fetch","text","serverInfoJson","reviver","split","folderName","svc","ti","toISOString","JSON","parse","_super","expectedFormat","__extends","Error","dXforms","headRow","concat","geoTransforms","gt","values","transformForward","wkid","latestWkid","row","v","j","createLink","from","rows","parseInt","cells","matchCells","idCell","cellId","rowSpan","length","splice","parent","parentElement","removeChild","MapServiceResponseLayer","parentLayerId","subLayerIds","parentLayer","defaultVisibility","minScale","maxScale","subLayers","parentList","group","debug","TypeError","dataset","subLayerList","_c","sl","groupEnd","layerInfos","layerMap","Map","topLevelLayers","layers","layerInfos_1","layerInfos_1_1","lInfo","push","createLayerObjects","layerList","topLevelLayers_1","topLevelLayers_1_1","createImg","legend","contentType","imageData","img","src","alt","label","width","height","legendSymbols","legendSymbols_1","legendSymbols_1_1","legendResponse","frag","createDocumentFragment","layers_1","layers_1_1","layerHeading","layerName","layerType","scaleP","toSymbolUrl","imageUrlHex","layerUrl","pictureSymbolToImage","pms","img_1","sValue","setAttribute","pfs","outline","color","style","replace","toLowerCase","borderStyle","borderColor","borderWidth","symbolObject","__WEBPACK_AMD_DEFINE_RESULT__","aa","apply","arguments","ba","slice","unshift","Function","indexOf","q","now","ca","da","window","FontFace","e","cssText","u","getElementsByTagName","documentElement","insertBefore","lastChild","parentNode","w","className","f","y","z","rel","media","onload","onerror","setTimeout","A","onreadystatechange","readyState","tagName","B","C","D","E","F","G","I","J","H","ga","substr","ha","h","events","classes","L","K","ja","M","aria-hidden","N","O","P","Q","start","Promise","fonts","fa","then","race","clearTimeout","R","S","T","exec","navigator","userAgent","la","U","offsetWidth","serif","V","ma","W","X","na","oa","qa","k","x","xa","vendor","ra","sa","ta","ua","context","timeout","ia","ka","pa","projectId","version","api","fontfamily","fontStyle","fontWeight","urls","testStrings","ya","za","latin","latin-ext","cyrillic","greek","khmer","Hanuman","Aa","thin","extralight","extra-light","ultralight","ultra-light","light","regular","book","medium","semi-bold","semibold","demi-bold","demibold","bold","extra-bold","extrabold","ultra-bold","ultrabold","black","heavy","Ba","italic","normal","Ca","Ea","Fa","Arimo","Cousine","Tinos","Ga","Ha","pop","va","isNaN","Da","encodeURIComponent","wa","Typekit","config","async","__webfontfontdeckmodule__","weight","hostname","ea","Y","custom","fontdeck","monotype","typekit","Z"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n","import { UnexpectedUrlFormatError } from \"./UnexpectedUrlFormatError\";\r\n\r\n// /**\r\n//  * This error is thrown by functions that expect a URL to be in a certain format\r\n//  * and are given a URL (or other text string) that does not match the expected format.\r\n//  * @member {string} message `Unexpected URL format. ${url} does not match ${expectedFormat}`\r\n//  */\r\n// export class UnexpectedUrlFormatError extends Error {\r\n//   /**\r\n//    * Creates a new instance of the class.\r\n//    * @param url The URL that caused the exception.\r\n//    * @param expectedFormat The regular expression showing the format that was expected.\r\n//    */\r\n//   constructor(public url: string, public expectedFormat: RegExp) {\r\n//     super(`Unexpected URL format. ${url} does not match ${expectedFormat}`);\r\n//   }\r\n// }\r\n\r\n/**\r\n * Gets the value of the \"url\" search parameter from location.search.\r\n * @returns Returns the \"url\" value if present, null otherwise.\r\n */\r\nexport function getUrlSearchParam() {\r\n  const urlSearch = new URLSearchParams(location.search);\r\n  const url = urlSearch.get(\"url\");\r\n  return url;\r\n}\r\n\r\n/**\r\n * Extracts the server root URL.\r\n * @param url Server, service, layer, or other server resource URL\r\n */\r\nexport function getServerRoot(url: string = getUrlSearchParam()!) {\r\n  const re = /^.+\\/arcgis\\/rest(\\/services)?/;\r\n  const match = url.match(re);\r\n  if (!match) {\r\n    throw new UnexpectedUrlFormatError(url, re);\r\n  }\r\n  // Add the \"services\" portion if missing.\r\n  if (!match[1]) {\r\n    // return new URL(\"services\", match[0]).toString();\r\n    return `${match[0]}/services`;\r\n  }\r\n  return match[0];\r\n}\r\n\r\n/**\r\n * Extracts the (Map, Feature, GP, etc.) service URL.\r\n * @param url\r\n */\r\nexport function getServiceUrl(url: string = getUrlSearchParam()!) {\r\n  const re = /^.+\\/arcgis\\/rest\\/services(?:\\/\\w+){1,2}\\/(?:\\w+Server)/i;\r\n  const match = url.match(re);\r\n  if (!match) {\r\n    throw new UnexpectedUrlFormatError(url, re);\r\n  }\r\n  return match[0];\r\n}\r\n\r\n/**\r\n * Converts an ArcGIS Server URL into an application URL with its \"url\"\r\n * search parameter set to the ArcGIS Server URL.\r\n * @param arcGisUrl An ArcGIS Server URL (e.g., map service, folder, server root)\r\n * @param appUrl Application URL. defaults to location.href.\r\n */\r\nexport function wrapUrl(arcGisUrl: string, appUrl: string = location.href) {\r\n  const url = new URL(appUrl);\r\n  url.searchParams.set(\"url\", arcGisUrl);\r\n  return url.toString();\r\n}\r\n\r\n/**\r\n * When a URL is parsed the URLs for its parent's are returned.\r\n */\r\nexport interface IParsedUrls {\r\n  /**\r\n   * E.g., https://www.example.com/arcgis/rest/services\r\n   */\r\n  root: string;\r\n  /**\r\n   * E.g., https://www.example.com/arcgis/rest/services/MyFolder\r\n   */\r\n  folder: string | null;\r\n  /**\r\n   * E.g., https://www.example.com/arcgis/rest/services/MyFolder/MyService/MapServer\r\n   * E.g., https://www.example.com/arcgis/rest/services/MyService/MapServer\r\n   */\r\n  service: string | null;\r\n  /**\r\n   * E.g., https://www.example.com/arcgis/rest/services/MyFolder/MyService/MapServer/0\r\n   * E.g., https://www.example.com/arcgis/rest/services/MyService/MapServer/0\r\n   */\r\n  layer: string | null;\r\n  /**\r\n   * E.g., https://www.example.com/arcgis/rest/services/MyFolder/MyServiceGPServer/MyToolName\r\n   * E.g., https://www.example.com/arcgis/rest/services/MyService/GPServer/MyToolName\r\n   */\r\n  tool: string | null;\r\n}\r\n\r\n/**\r\n * Gets the parent resources' URLs for a given ArcGIS Server URL.\r\n * @param url ArcGIS Server URL.\r\n * @returns Returns server \"root\" URL, and if available: \"folder\", \"service\", and \"layer\" URLs.\r\n */\r\nexport function getServiceUrlParts(\r\n  url: string = getUrlSearchParam()!\r\n): IParsedUrls | null {\r\n  if (!url) {\r\n    return null;\r\n  }\r\n  /*\r\n  /(^.+\\/arcgis\\/rest\\/services)  # 1. Server root\r\n  (?:\r\n    (?:\\/)\r\n    (?:(\\w+)\\/)?                  # 2. Folder name (may or may not be present)\r\n    (\\w+)\r\n    \\/\r\n    (\\w+Server)                   # 3. The type of service (MapServer, FeatureServer, etc)\r\n    (?:\r\n      \\/(\\d+)                     # 4. Layer number\r\n    )?\r\n  )?/\r\n  */\r\n  const svcUrlRe = /(^.+\\/arcgis\\/rest\\/services)(?:(?:\\/)(?:(\\w+)\\/)?(\\w+)\\/(\\w+Server)(?:\\/(\\d+))?)?/;\r\n  const gpSvcUrlRe = /(^.+\\/arcgis\\/rest\\/services)(?:(?:\\/)(?:(\\w+)\\/)?(\\w+)\\/(\\w+Server)(?:\\/([^\\/]+))?)?/;\r\n\r\n  const match = url.match(svcUrlRe);\r\n  if (match) {\r\n    const [, rootUrl, folder, serviceName, serviceType, layerId] = match;\r\n\r\n    const service = serviceName\r\n      ? `${rootUrl}/${\r\n          folder ? [folder, serviceName].join(\"/\") : serviceName\r\n        }/${serviceType}`\r\n      : null;\r\n\r\n    return {\r\n      root: rootUrl,\r\n      folder: folder ? `${rootUrl}/${folder}` : null,\r\n      service,\r\n      layer: service && layerId ? `${service}/${layerId}` : null,\r\n      tool: null\r\n    };\r\n  }\r\n\r\n  const gpMatch = url.match(gpSvcUrlRe);\r\n  if (gpMatch) {\r\n    const [, rootUrl, folder, serviceName, serviceType, toolName] = gpMatch;\r\n\r\n    const service = serviceName\r\n      ? `${rootUrl}/${\r\n          folder ? [folder, serviceName].join(\"/\") : serviceName\r\n        }/${serviceType}`\r\n      : null;\r\n\r\n    return {\r\n      root: rootUrl,\r\n      folder: folder ? `${rootUrl}/${folder}` : null,\r\n      service,\r\n      layer: null,\r\n      tool: service && toolName ? `${service}/${toolName}` : null\r\n    };\r\n  }\r\n\r\n  // Possibly might be missing the \"services\" part. Try that before throwing exception.\r\n  const serverRootUrl = getServerRoot();\r\n  if (!serverRootUrl) {\r\n    throw new UnexpectedUrlFormatError(url, svcUrlRe);\r\n  }\r\n  return {\r\n    root: serverRootUrl,\r\n    folder: null,\r\n    service: null,\r\n    layer: null,\r\n    tool: null\r\n  };\r\n}\r\n","import { Color } from \"@esri/arcgis-rest-common-types\";\r\n\r\nexport function isHexString(s: string) {\r\n  if (!s) {\r\n    return false;\r\n  }\r\n  return /^[0-9a-f]+$/i.test(s);\r\n}\r\n\r\nexport function rgbToHex(rgb: number[]) {\r\n  const hexValues = rgb.map(value => value.toString(16));\r\n  return `#${hexValues.join(\"\")}`;\r\n}\r\n\r\nexport function rgbaArrayToCssRgb(rgba: Color) {\r\n  const [r, g, b] = rgba;\r\n  let [, , , a] = rgba;\r\n  a = a / 255;\r\n  return `rgba(${[r, g, b, a].join(\",\")})`;\r\n}\r\n\r\nexport function colorToDom(rgba: Color) {\r\n  const [r, g, b] = rgba;\r\n  let [, , , a] = rgba;\r\n  a = a / 255;\r\n  const input = document.createElement(\"input\");\r\n  input.type = \"color\";\r\n  input.value = rgbToHex([r, g, b]);\r\n  input.disabled = true;\r\n  return input;\r\n}\r\n","import { Color } from \"@esri/arcgis-rest-common-types\";\r\nimport { load } from \"webfontloader\";\r\nimport { getServerInfo } from \"./arcGisServerRequests\";\r\nimport { colorToDom } from \"./colorUtils\";\r\nimport { createDatumXFormTable } from \"./datumUtils\";\r\nimport { ILinkInfo } from \"./interfaces\";\r\nimport { createLayerList } from \"./Layer\";\r\nimport { createLegendDom, createLegendList, ILegendResponse } from \"./legend\";\r\nimport { symbolToDom } from \"./symbols\";\r\nimport {\r\n  getServiceUrl,\r\n  getServiceUrlParts,\r\n  getUrlSearchParam,\r\n  wrapUrl\r\n} from \"./urlUtils\";\r\n\r\nfunction arrayToTable(objects: any[], propertyName?: string) {\r\n  const table = document.createElement(\"table\");\r\n  if (propertyName) {\r\n    table.classList.add(`property--${propertyName}`);\r\n  }\r\n  const head = table.createTHead();\r\n  const hRow = head.insertRow();\r\n\r\n  const body = table.createTBody();\r\n\r\n  // Get list of all field names.\r\n  const fieldNames = new Set<string>();\r\n  for (const obj of objects) {\r\n    for (const propName in obj) {\r\n      if (obj.hasOwnProperty(propName)) {\r\n        fieldNames.add(propName);\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add a table heading cell for each property.\r\n  fieldNames.forEach(fn => {\r\n    const th = document.createElement(\"th\");\r\n    th.innerText = fn;\r\n    hRow.appendChild(th);\r\n  });\r\n\r\n  objects.forEach(o => {\r\n    const bRow = body.insertRow();\r\n    fieldNames.forEach(fn => {\r\n      const value = o[fn];\r\n      const cell = bRow.insertCell();\r\n      if (fn === \"name\" && o.hasOwnProperty(\"id\")) {\r\n        const a = document.createElement(\"a\");\r\n        const svcUrl = getServiceUrl();\r\n        const hrefUrl = new URL(location.href);\r\n        hrefUrl.searchParams.set(\"url\", `${svcUrl}/${o.id}`);\r\n        a.href = hrefUrl.toString();\r\n        a.innerText = value;\r\n        cell.appendChild(a);\r\n      } else if (fn === \"domain\") {\r\n        const domElement = toDomElement(value);\r\n        if (domElement) {\r\n          cell.appendChild(domElement);\r\n        }\r\n      } else if (/^(string)|(number)/.test(typeof value)) {\r\n        cell.innerText = value;\r\n      } else {\r\n        const cellContentElement = toDomElement(value, fn);\r\n        if (cellContentElement) {\r\n          cell.appendChild(cellContentElement);\r\n        }\r\n      }\r\n    });\r\n  });\r\n\r\n  // Return the table only if the body is not empty.\r\n  return body.childElementCount ? table : null;\r\n}\r\n\r\nfunction arrayToElement(arr: any[], propertyName?: string) {\r\n  const currentUrl = getUrlSearchParam();\r\n  const isLayersUrl = /\\/layers\\/?$/.test(currentUrl!);\r\n  if (propertyName) {\r\n    if (propertyName === \"layers\" && !isLayersUrl) {\r\n      return createLayerList(arr);\r\n    }\r\n    if (\r\n      /^(fields)|(layers)|(tables)|(codedValues)|(lods)|(indexes)|(relationships)|(((symbol)|(sub))Layers)|((sub)?types)$/.test(\r\n        propertyName\r\n      )\r\n    ) {\r\n      return arrayToTable(arr, propertyName);\r\n    }\r\n\r\n    if (/^(folders)|(services)/.test(propertyName)) {\r\n      const linkList = document.createElement(\"ul\");\r\n      arr.forEach((linkItem: ILinkInfo) => {\r\n        const a = document.createElement(\"a\");\r\n        const urlParams = new URLSearchParams({ url: linkItem.url });\r\n        a.href = new URL(\"?\" + urlParams.toString(), location.href).toString();\r\n        a.textContent = linkItem.name;\r\n        const li = document.createElement(\"li\");\r\n        li.appendChild(a);\r\n        linkList.appendChild(li);\r\n      });\r\n      return linkList;\r\n    }\r\n\r\n    if (propertyName === \"legend\") {\r\n      return createLegendList(arr);\r\n    }\r\n\r\n    if (propertyName === \"tasks\") {\r\n      const serviceUrl = getServiceUrl();\r\n      const links = arr.map(taskName => {\r\n        const a = document.createElement(\"a\");\r\n        a.href = wrapUrl(`${serviceUrl}/${taskName}`);\r\n        a.textContent = taskName;\r\n        const li = document.createElement(\"li\");\r\n        li.appendChild(a);\r\n        return li;\r\n      });\r\n      const taskList = document.createElement(\"ul\");\r\n      links.forEach(link => taskList.appendChild(link));\r\n      return taskList;\r\n    }\r\n\r\n    if (propertyName === \"color\") {\r\n      return colorToDom(arr as Color);\r\n    }\r\n  }\r\n\r\n  const list = document.createElement(\"ul\");\r\n  if (propertyName) {\r\n    list.classList.add(`property--${propertyName}`);\r\n  }\r\n\r\n  arr\r\n    .map(item => {\r\n      const element = toDomElement(item);\r\n      if (element) {\r\n        const li = document.createElement(\"li\");\r\n        li.appendChild(element);\r\n        return li;\r\n      }\r\n    })\r\n    .filter(li => li !== undefined)\r\n    .forEach(li => list.appendChild(li!));\r\n  return list;\r\n}\r\n\r\n/**\r\n * Converts an object into a DOM node.\r\n * @param o any type of JavaScript object or value.\r\n * @returns if the input is a standard object, returned value will be an HTMLDListElement.\r\n * For other types, such as string, number, boolean, or Date, a Text element will be returned\r\n */\r\nfunction toDomElement(o: any, propertyName?: string) {\r\n  if (o == null) {\r\n    return document.createTextNode(o === null ? \"null\" : \"undefined\");\r\n  }\r\n\r\n  if (o instanceof Element) {\r\n    return o;\r\n  }\r\n\r\n  if (propertyName) {\r\n    // if propertyName ends with \"url\" and is not a hex number...\r\n    if (o && /Url$/i.test(propertyName) && !/^[0-9a-f]+$/i.test(o)) {\r\n      const a = document.createElement(\"a\");\r\n      a.textContent = o;\r\n      a.href = o;\r\n      return a;\r\n    }\r\n    if (/^(?:latest)?[Ww]kid$/.test(propertyName)) {\r\n      const a = document.createElement(\"a\");\r\n      a.innerText = o;\r\n      a.href = `https://epsg.io/${o}`;\r\n      a.target = \"epsg\";\r\n      return a;\r\n    }\r\n    if (propertyName === \"datumTransformations\") {\r\n      return createDatumXFormTable(o);\r\n    }\r\n  }\r\n\r\n  // Try symbol\r\n  const symbolImg = symbolToDom(o);\r\n  if (symbolImg) {\r\n    return symbolImg;\r\n  }\r\n\r\n  if (Array.isArray(o)) {\r\n    return arrayToElement(o, propertyName);\r\n  }\r\n\r\n  if (typeof o === \"boolean\") {\r\n    return document.createTextNode(o ? \"true\" : \"false\");\r\n  }\r\n\r\n  if (/^(string)|(number)$/.test(typeof o) || o instanceof Date) {\r\n    return document.createTextNode(`${o}`);\r\n  }\r\n\r\n  const dl = document.createElement(\"dl\");\r\n\r\n  for (const key in o) {\r\n    if (o.hasOwnProperty(key)) {\r\n      const value = o[key];\r\n      const dt = document.createElement(\"dt\");\r\n      dt.innerText = key;\r\n      const dd = document.createElement(\"dd\");\r\n      const content = toDomElement(value, key);\r\n      if (content) {\r\n        dd.appendChild(content);\r\n      }\r\n\r\n      [dt, dd].forEach(element => dl.appendChild(element));\r\n    }\r\n  }\r\n\r\n  return dl;\r\n}\r\n\r\n/**\r\n * Creates links to parent resources and appends this list to document body.\r\n */\r\nfunction createBreadcrumbs() {\r\n  const urlParts = getServiceUrlParts();\r\n  if (urlParts) {\r\n    const breadcrumbs = document.createElement(\"nav\");\r\n    const list = document.createElement(\"ol\");\r\n    breadcrumbs.appendChild(list);\r\n    breadcrumbs.classList.add(\"breadcrumbs\");\r\n    for (const partName in urlParts) {\r\n      if (urlParts.hasOwnProperty(partName)) {\r\n        const url = (urlParts as any)[partName];\r\n        if (!url) {\r\n          continue;\r\n        }\r\n        const li = document.createElement(\"li\");\r\n        li.classList.add(\"breadcrumbs__item\");\r\n        const a = document.createElement(\"a\");\r\n        a.classList.add(\"breadcrumbs__item__anchor\");\r\n        const pageUrl = new URL(location.href);\r\n        pageUrl.searchParams.set(\"url\", url);\r\n        a.href = pageUrl.toString();\r\n        a.innerText = partName;\r\n        li.appendChild(a);\r\n        list.appendChild(li);\r\n      }\r\n    }\r\n    const header = document.body.querySelector(\"header\");\r\n    header!.appendChild(breadcrumbs);\r\n  }\r\n}\r\n\r\ncreateBreadcrumbs();\r\n\r\nfunction createLinksList(url: string) {\r\n  const { service, tool: toolName, layer } = getServiceUrlParts(url)!;\r\n\r\n  // Exit if deeper than service level.\r\n  if (!service || (toolName || layer)) {\r\n    return;\r\n  }\r\n\r\n  // Exit if GP service.\r\n  if (/GPServer/.test(service)) {\r\n    return;\r\n  }\r\n\r\n  function createListItem(a: HTMLAnchorElement) {\r\n    const li = document.createElement(\"li\");\r\n    li.appendChild(a);\r\n    list.appendChild(li);\r\n  }\r\n\r\n  function createAnchor(s: string, wrap?: boolean) {\r\n    const a = document.createElement(\"a\");\r\n    a.textContent = s;\r\n    let href = `${service}/${s}`;\r\n    if (wrap) {\r\n      href = wrapUrl(href);\r\n    } else {\r\n      a.target = \"_blank\";\r\n    }\r\n    a.href = href;\r\n    return a;\r\n  }\r\n\r\n  let links = [\"legend\", \"layers\", \"info/iteminfo\"].map(s =>\r\n    createAnchor(s, true)\r\n  );\r\n  const list = document.createElement(\"ul\");\r\n  list.classList.add(\"layer-resource-link-list\");\r\n  links.forEach(createListItem);\r\n  // These endpoints don't support JSON, so will link directly\r\n  // instead of using wrapped app URL.\r\n  links = [\"metadata\", \"thumbnail\"].map(s => createAnchor(`info/${s}`, false));\r\n  links.forEach(createListItem);\r\n\r\n  return list;\r\n}\r\n\r\nload({\r\n  google: {\r\n    families: [\"Noto Sans\"]\r\n  }\r\n});\r\n\r\n(async () => {\r\n  const urlParams = new URLSearchParams(location.search);\r\n\r\n  const serverUrl = urlParams.get(\"url\");\r\n\r\n  if (!serverUrl) {\r\n    return;\r\n  }\r\n\r\n  // Put URL in box:\r\n  const input = document.querySelector<HTMLInputElement>(\r\n    \"form > input[name='url']\"\r\n  );\r\n  if (input) {\r\n    input.value = serverUrl;\r\n  }\r\n\r\n  const legendUrlRe = /\\/legend\\b\\/?/;\r\n\r\n  const mainSection = document.querySelector(\"#main\");\r\n\r\n  if (!mainSection) {\r\n    console.warn(\"couldn't find main section\");\r\n  }\r\n\r\n  const serverInfo = await getServerInfo(serverUrl);\r\n\r\n  if (legendUrlRe.test(serverUrl)) {\r\n    const legendDom = createLegendDom(serverInfo as ILegendResponse);\r\n    mainSection!.appendChild(legendDom);\r\n    return;\r\n  }\r\n\r\n  const linksList = createLinksList(serverUrl);\r\n  if (linksList) {\r\n    mainSection!.appendChild(linksList);\r\n  }\r\n\r\n  const contentElement = toDomElement(serverInfo);\r\n  if (contentElement) {\r\n    mainSection!.appendChild(contentElement);\r\n  }\r\n})();\r\n","import { IServerInfo, IService } from \"./interfaces\";\r\nimport { getServerRoot } from \"./urlUtils\";\r\n\r\n/**\r\n * Provides information about a map server URL\r\n * @param url ArcGIS server, folder, service, or layer URL.\r\n */\r\nexport async function getServerInfo(url: string): Promise<IServerInfo> {\r\n  const serverResponse = await fetch(url + \"?f=json\");\r\n  const serverInfoJson = await serverResponse.text();\r\n  const root = getServerRoot(url);\r\n\r\n  const reviver = (key: any, value: any) => {\r\n    // Split comma-separated lists into arrays.\r\n    if (\r\n      /^(supported\\w+Format\\w*)|(Keywords)|(capabilities)$/i.test(key) &&\r\n      typeof value === \"string\"\r\n    ) {\r\n      return value ? value.split(/[,\\s]+/g) : \"\";\r\n    }\r\n    if (key === \"folders\") {\r\n      const folderNames = value as string[];\r\n      return folderNames.map(folderName => ({\r\n        name: folderName,\r\n        url: `${root}/${folderName}`\r\n      }));\r\n    }\r\n    if (key === \"services\") {\r\n      const services = value as IService[];\r\n      return services.map(svc => ({\r\n        name: svc.name,\r\n        url: `${root}/${svc.name}/${svc.type}`\r\n      }));\r\n    }\r\n    if (\r\n      key === \"timeExtent\" ||\r\n      // property name ends with \"Date\" and value is an integer.\r\n      (/Date/.test(key) && typeof value === \"number\" && value % 1 === 0)\r\n    ) {\r\n      const timeInstants = value as number[];\r\n      return timeInstants.map(ti => new Date(ti).toISOString());\r\n    }\r\n    return value;\r\n  };\r\n\r\n  const serverInfo = JSON.parse(serverInfoJson, reviver);\r\n  return serverInfo;\r\n}\r\n","/**\r\n * This error is thrown by functions that expect a URL to be in a certain format\r\n * and are given a URL (or other text string) that does not match the expected format.\r\n * @member {string} message `Unexpected URL format. ${url} does not match ${expectedFormat}`\r\n */\r\nexport class UnexpectedUrlFormatError extends Error {\r\n  /**\r\n   * Creates a new instance of the class.\r\n   * @param url The URL that caused the exception.\r\n   * @param expectedFormat The regular expression showing the format that was expected.\r\n   */\r\n  constructor(public url: string, public expectedFormat: RegExp) {\r\n    super(`Unexpected URL format. ${url} does not match ${expectedFormat}`);\r\n  }\r\n}\r\n","import { IDatumTransformation } from \"./interfaces\";\r\n\r\n/**\r\n * Creates a table listing datum transformations.\r\n * @param dXforms Data transformation objects\r\n */\r\nexport function createDatumXFormTable(dXforms: IDatumTransformation[]) {\r\n  const table = document.createElement(\"table\");\r\n  table.classList.add(\"property--datumTransformations\");\r\n  const headRow = table.createTHead().insertRow();\r\n  const body = table.createTBody();\r\n\r\n  const propNames = [\"name\", \"transformForward\", \"wkid\", \"latestWkid\"];\r\n\r\n  function createLink(name: string, wkid: number, latestWkid?: number) {\r\n    const a = document.createElement(\"a\");\r\n    a.innerText = name;\r\n    a.target = \"epsg\";\r\n    const url = `https://epsg.io/${latestWkid || wkid}`;\r\n    a.href = url;\r\n    return a;\r\n  }\r\n\r\n  [\"id\"].concat(propNames).forEach(s => {\r\n    const th = document.createElement(\"th\");\r\n    th.innerText = s;\r\n    headRow.appendChild(th);\r\n  });\r\n\r\n  dXforms.forEach((dt, i) => {\r\n    dt.geoTransforms.forEach(gt => {\r\n      const values = [i, gt.name, gt.transformForward, gt.wkid, gt.latestWkid];\r\n      const row = body.insertRow();\r\n      values.forEach((v, j) => {\r\n        const cell = row.insertCell();\r\n        if (j === 1) {\r\n          cell.appendChild(createLink(gt.name, gt.wkid, gt.latestWkid));\r\n        } else {\r\n          cell.innerText = `${v}`;\r\n        }\r\n      });\r\n    });\r\n  });\r\n\r\n  // Loop through the rows and merge the ID cells that are the same.\r\n  const dtxIds = new Set(\r\n    Array.from(body.rows, r => parseInt(r.cells[0].innerText, 10))\r\n  );\r\n  dtxIds.forEach(id => {\r\n    // Get all rows with an id cell matching the current id.\r\n    const matchCells = Array.from(body.rows)\r\n      .map(row => row.cells[0])\r\n      .filter(idCell => {\r\n        if (!idCell.innerText) {\r\n          return false;\r\n        }\r\n        const cellId = parseInt(idCell.innerText, 10);\r\n        return id === cellId;\r\n      });\r\n    const rowSpan = matchCells.length;\r\n    // Don't need to proceed any further if there is only one row for the id.\r\n    if (rowSpan > 1) {\r\n      matchCells[0].rowSpan = rowSpan;\r\n      const cellsToRemove = matchCells.splice(1);\r\n      cellsToRemove.forEach(cell => {\r\n        const parent = cell.parentElement;\r\n        if (parent) {\r\n          parent.removeChild(cell);\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  return table;\r\n}\r\n","import { getServiceUrl, wrapUrl } from \"./urlUtils\";\r\n\r\nexport interface IMapServiceResponseLayer {\r\n  id: number;\r\n  name: string;\r\n  parentLayerId: number;\r\n  defaultVisibility: boolean;\r\n  subLayerIds: number[] | null;\r\n  minScale: number;\r\n  maxScale: number;\r\n}\r\n\r\nexport interface IMapServiceLayersResponseSubLayer {\r\n  id: number;\r\n  name: string;\r\n}\r\n\r\nexport interface IMapServiceLayersResponseLayer {\r\n  id: number;\r\n  name: string;\r\n  parentLayer: IMapServiceLayersResponseSubLayer;\r\n  defaultVisibility: boolean;\r\n  subLayerIds: number[] | null;\r\n  minScale: number;\r\n  maxScale: number;\r\n}\r\n\r\nexport class MapServiceResponseLayer {\r\n  public id: number;\r\n  public name: string;\r\n  public parentLayerId: number | null = null;\r\n  public defaultVisibility: boolean;\r\n  public subLayerIds: number[] | null = null;\r\n  public minScale: number;\r\n  public maxScale: number;\r\n  public subLayers: MapServiceResponseLayer[] | null;\r\n  public parentLayer: MapServiceResponseLayer | null | undefined;\r\n  public get url() {\r\n    const svcUrl = getServiceUrl();\r\n    if (svcUrl) {\r\n      return `${svcUrl}/${this.id}`;\r\n    }\r\n  }\r\n  constructor(\r\n    layer: IMapServiceResponseLayer | IMapServiceLayersResponseLayer\r\n  ) {\r\n    this.id = layer.id;\r\n    this.name = layer.name;\r\n    // this.parentLayerId = (layer as IMapServiceResponseLayer).parentLayerId || (layer as IMapServiceLayersResponseLayer).parent\r\n    if (layer.hasOwnProperty(\"parentLayerId\")) {\r\n      this.parentLayerId = (layer as IMapServiceResponseLayer).parentLayerId;\r\n    } else if (layer.hasOwnProperty(\"parentLayer\")) {\r\n      const l = layer as IMapServiceLayersResponseLayer;\r\n      this.parentLayerId = l.parentLayer ? l.parentLayer.id : -1;\r\n    }\r\n    this.defaultVisibility = layer.defaultVisibility;\r\n    if (layer.subLayerIds) {\r\n      if (typeof layer.subLayerIds[0] === \"number\") {\r\n        this.subLayerIds = layer.subLayerIds as number[];\r\n      } else {\r\n        this.subLayerIds = (layer.subLayerIds as any).map((l: any) => l.id);\r\n      }\r\n    }\r\n    this.minScale = layer.minScale;\r\n    this.maxScale = layer.maxScale;\r\n\r\n    this.subLayers = layer.subLayerIds\r\n      ? new Array<MapServiceResponseLayer>()\r\n      : null;\r\n    // // Set to null if there is no parent layer, otherwise set to undefined\r\n    // // so it can be defined later.\r\n    // this.parentLayer = layer.parentLayerId === -1 ? null : undefined;\r\n  }\r\n}\r\n\r\nfunction createLayerObjects(layerInfos: IMapServiceResponseLayer[]) {\r\n  console.group(\"createLayerObjects\");\r\n  console.debug(\"layerInfos\", layerInfos);\r\n  // Create lookup for layers by layer's \"id\".\r\n  const layerMap = new Map<number, MapServiceResponseLayer>();\r\n  // Initialize an array that will only contain layers with no parent.\r\n  const topLevelLayers = new Array<MapServiceResponseLayer>();\r\n  const layers = new Array<MapServiceResponseLayer>();\r\n  for (const lInfo of layerInfos) {\r\n    // Create layer object.\r\n    const layer = new MapServiceResponseLayer(lInfo);\r\n    layers.push(layer);\r\n    // Add to the Map.\r\n    layerMap.set(layer.id, layer);\r\n    // If layer has a parent, set the layer's parentLayer object.\r\n    // Otherwise add it to the topLevelLayers array.\r\n    if (lInfo.parentLayerId !== -1 || (lInfo as any).parentLayer != null) {\r\n      layer.parentLayer = layerMap.get(layer.parentLayerId!);\r\n    } else {\r\n      layer.parentLayer = null;\r\n      topLevelLayers.push(layer);\r\n    }\r\n  }\r\n\r\n  // Now that all of the layer objects have been created,\r\n  // for the layers that have sublayer IDs, create the layer's\r\n  // sublayers property array.\r\n  layers\r\n    .filter(l => !!l.subLayerIds)\r\n    .forEach(l => {\r\n      l.subLayers = l.subLayerIds!.map(id => layerMap.get(id)!);\r\n    });\r\n  console.groupEnd();\r\n\r\n  return { layerMap, topLevelLayers };\r\n}\r\n\r\ntype HTMLList = HTMLOListElement | HTMLUListElement;\r\n\r\nfunction createListItem(layer: MapServiceResponseLayer, parentList?: HTMLList) {\r\n  console.group(\"createListItem\");\r\n  console.debug(\"args\", { layer, parentList });\r\n  if (!layer) {\r\n    throw TypeError(\"layer parameter cannot be null or undefined\");\r\n  }\r\n  const svcUrl = getServiceUrl()!;\r\n  const li = document.createElement(\"li\");\r\n  const a = document.createElement(\"a\");\r\n  li.appendChild(a);\r\n  a.textContent = `${layer.name} (${layer.id})`;\r\n  a.href = wrapUrl(`${svcUrl}/${layer.id}`);\r\n  li.dataset.defaultVisibility = layer.defaultVisibility.toString();\r\n  if (parentList) {\r\n    parentList.appendChild(li);\r\n  }\r\n  if (layer.subLayers) {\r\n    const subLayerList = document.createElement(\"ul\");\r\n    for (const sl of layer.subLayers) {\r\n      if (!sl) {\r\n        console.warn(\"current sublayer is null or undefined\", sl);\r\n        continue;\r\n      }\r\n      createListItem(sl, subLayerList);\r\n    }\r\n    li.appendChild(subLayerList);\r\n  }\r\n  console.groupEnd();\r\n  return li;\r\n}\r\n\r\nexport function createLayerList(layerInfos: IMapServiceResponseLayer[]) {\r\n  console.group(\"createLayerList\");\r\n  const { topLevelLayers, layerMap } = createLayerObjects(layerInfos);\r\n  console.debug(\"parsed\", { topLevelLayers, layerMap });\r\n  const layerList = document.createElement(\"ul\");\r\n  for (const layer of topLevelLayers) {\r\n    createListItem(layer, layerList);\r\n  }\r\n  console.groupEnd();\r\n  return layerList;\r\n}\r\n","import { getServiceUrl } from \"./urlUtils\";\r\n\r\nexport interface ILegendLayer {\r\n  layerId: number;\r\n  layerName: string;\r\n  layerType: string;\r\n  minScale: number;\r\n  maxScale: number;\r\n  legend: ILegendSymbol[];\r\n}\r\n\r\nexport interface ILegendResponse {\r\n  layers: ILegendLayer[];\r\n}\r\n\r\nexport interface ILegendSymbol {\r\n  label: string | null;\r\n  url: string;\r\n  imageData: string;\r\n  contentType: string;\r\n  height: number;\r\n  width: number;\r\n}\r\n\r\nfunction createImg(legend: ILegendSymbol) {\r\n  const url = `data:${legend.contentType};base64,${legend.imageData}`;\r\n  const img = document.createElement(\"img\");\r\n  img.src = url;\r\n  img.alt = legend.label || \"unnamed legend symbol\";\r\n  img.width = legend.width;\r\n  img.height = legend.height;\r\n  return img;\r\n}\r\n\r\nexport function createLegendList(legendSymbols: ILegendSymbol[]) {\r\n  // If there is only a single, unlabeld symbol, return just an img instead of\r\n  // a definition list.\r\n  if (legendSymbols.length === 1 && !legendSymbols[0].label) {\r\n    return createImg(legendSymbols[0]);\r\n  }\r\n  const dl = document.createElement(\"dl\");\r\n  for (const s of legendSymbols) {\r\n    const img = createImg(s);\r\n    const dt = document.createElement(\"dt\");\r\n    dt.textContent = s.label;\r\n    const dd = document.createElement(\"dd\");\r\n    dd.appendChild(img);\r\n    [dt, dd].forEach(element => dl.appendChild(element));\r\n  }\r\n  return dl;\r\n}\r\n\r\nexport function createLegendDom(legendResponse: ILegendResponse) {\r\n  const frag = document.createDocumentFragment();\r\n  const { layers } = legendResponse;\r\n\r\n  for (const layer of layers) {\r\n    const layerHeading = document.createElement(\"h2\");\r\n    layerHeading.textContent = `${layer.layerId}. ${layer.layerName} (${\r\n      layer.layerType\r\n    })`;\r\n    frag.appendChild(layerHeading);\r\n    if (layer.minScale || layer.maxScale) {\r\n      const scaleP = document.createElement(\"p\");\r\n      scaleP.textContent = `Scale: ${layer.minScale} to ${layer.maxScale}`;\r\n      frag.appendChild(scaleP);\r\n    }\r\n    if (layer.legend) {\r\n      frag.appendChild(createLegendList(layer.legend));\r\n    }\r\n  }\r\n\r\n  return frag;\r\n}\r\n","import {\r\n  IPictureFillSymbol,\r\n  IPictureMarkerSymbol,\r\n  ISimpleFillSymbol,\r\n  ISimpleLineSymbol,\r\n  ISimpleMarkerSymbol,\r\n  ISymbol,\r\n  SimpleFillSymbolStyle,\r\n  SimpleLineSymbolStyle,\r\n  SimpleMarkerSymbolStyle\r\n} from \"@esri/arcgis-rest-common-types\";\r\nimport { isHexString, rgbaArrayToCssRgb } from \"./colorUtils\";\r\nimport { getServiceUrlParts } from \"./urlUtils\";\r\n\r\n/**\r\n * A symbol \"url\" property consists of just a hexidecimal string. This function\r\n * creates a valid URL from that hex string by combining it with the layer URL.\r\n * @param imageUrlHex The hexidecimal string from the \"url\" property of a symbol object.\r\n * @param layerUrl The URL of the service layer. If omitted, function will attempt to autodetect using \"url\" search parameter.\r\n */\r\nexport function toSymbolUrl(imageUrlHex: string, layerUrl?: string) {\r\n  // Ensure valid layer URL\r\n  const parts = getServiceUrlParts(layerUrl);\r\n  layerUrl = parts!.layer!;\r\n\r\n  const imageUrl = `${layerUrl}/images/${imageUrlHex}`;\r\n  return imageUrl;\r\n}\r\n\r\n/**\r\n * Converts a picture marker symbol object into an img element.\r\n * @param pms A picture marker symbol object.\r\n */\r\nexport function pictureSymbolToImage(\r\n  pms: IPictureMarkerSymbol | IPictureFillSymbol\r\n) {\r\n  let url: string | null = null;\r\n  if (pms.imageData && pms.contentType) {\r\n    url = `data:${pms.contentType};base64,${pms.imageData}`;\r\n  } else if (isHexString(pms.url!)) {\r\n    url = toSymbolUrl(pms.url!);\r\n  }\r\n  if (url) {\r\n    const img = document.createElement(\"img\");\r\n    img.src = url;\r\n    img.alt = \"legend symbol\";\r\n    [\"width\", \"height\"].forEach(propName => {\r\n      const sValue = pms.hasOwnProperty(propName)\r\n        ? (pms as any)[propName]\r\n        : null;\r\n      if (sValue) {\r\n        img.setAttribute(propName, sValue);\r\n      }\r\n    });\r\n    const pfs = pms as IPictureFillSymbol;\r\n    if (pfs.outline) {\r\n      const { color, width } = pfs.outline;\r\n      let style: string | undefined = pfs.outline.style;\r\n      if (style) {\r\n        style = style.replace(/^esriSLS/, \"\").toLowerCase();\r\n        if (/null/.test(style)) {\r\n          style = undefined;\r\n        } else {\r\n          img.style.borderStyle = style;\r\n        }\r\n      }\r\n\r\n      if (color) {\r\n        img.style.borderColor = rgbaArrayToCssRgb(color);\r\n      }\r\n\r\n      if (width !== undefined) {\r\n        img.style.borderWidth = `${width}px`;\r\n      }\r\n    }\r\n    return img;\r\n  }\r\n  return null;\r\n}\r\n\r\ninterface ISize {\r\n  width: string;\r\n  height: string;\r\n}\r\n\r\nfunction trimPrefix(\r\n  styleName:\r\n    | SimpleFillSymbolStyle\r\n    | SimpleLineSymbolStyle\r\n    | SimpleMarkerSymbolStyle\r\n) {\r\n  if (!styleName) {\r\n    return null;\r\n  }\r\n  if (/null$/i.test(styleName)) {\r\n    return null;\r\n  }\r\n  const styleDesc = styleName.replace(/^esriS[A-Z]S/, \"\");\r\n  const words = styleDesc.match(/[A-Z][a-z]+/g);\r\n  if (!words) {\r\n    return styleDesc;\r\n  }\r\n  return words.map(w => w.toLowerCase()).join(\"-\");\r\n}\r\n\r\nfunction applyOutlineStyle(element: HTMLElement, symbol?: ISimpleLineSymbol) {\r\n  if (symbol) {\r\n    const { style, color, width } = symbol;\r\n    if (style) {\r\n      const classStyle = trimPrefix(style);\r\n      if (classStyle) {\r\n        element.classList.add(`symbol-outline-style-${classStyle}`);\r\n        element.style.borderStyle = classStyle;\r\n      }\r\n    }\r\n    if (color) {\r\n      element.style.borderColor = rgbaArrayToCssRgb(color);\r\n    }\r\n    if (width) {\r\n      element.style.borderWidth = `${width}px`;\r\n    }\r\n  }\r\n}\r\n\r\nfunction sfsToDom(\r\n  symbol: ISimpleFillSymbol,\r\n  swatchSize: ISize = { width: \"20px\", height: \"20px\" }\r\n) {\r\n  const div = document.createElement(\"div\");\r\n\r\n  const { color, style } = symbol;\r\n\r\n  if (style) {\r\n    const fillStyle = trimPrefix(style);\r\n    if (color) {\r\n      div.style.backgroundColor = rgbaArrayToCssRgb(color);\r\n    }\r\n    if (fillStyle !== \"solid\") {\r\n      div.textContent = style;\r\n    } else {\r\n      div.style.width = swatchSize.width;\r\n      div.style.height = swatchSize.height;\r\n    }\r\n    div.classList.add(`fill-style--${style}`);\r\n    // TODO: show the fill style using CSS instead of just writing the text in div.\r\n  }\r\n\r\n  applyOutlineStyle(div, symbol.outline);\r\n\r\n  return div;\r\n}\r\n\r\n/**\r\n * Converts a symbol object to an img if possible.\r\n * @param symbolObject A symbol object.\r\n */\r\nexport function symbolToDom(symbolObject: ISymbol) {\r\n  if (/^esriP[MF]S$/.test(symbolObject.type)) {\r\n    return pictureSymbolToImage(symbolObject as IPictureMarkerSymbol);\r\n  }\r\n  // if (/^esriSFS$/.test(symbolObject.type)) {\r\n  //   return sfsToDom(symbolObject as ISimpleFillSymbol);\r\n  // }\r\n  return null;\r\n}\r\n","/* Web Font Loader v1.6.28 - (c) Adobe Systems, Google. License: Apache 2.0 */(function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf(\"native code\")?aa:ba;return p.apply(null,arguments)}var q=Date.now||function(){return+new Date};function ca(a,b){this.a=a;this.o=b||a;this.c=this.o.document}var da=!!window.FontFace;function t(a,b,c,d){b=a.c.createElement(b);if(c)for(var e in c)c.hasOwnProperty(e)&&(\"style\"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));d&&b.appendChild(a.c.createTextNode(d));return b}function u(a,b,c){a=a.c.getElementsByTagName(b)[0];a||(a=document.documentElement);a.insertBefore(c,a.lastChild)}function v(a){a.parentNode&&a.parentNode.removeChild(a)}\nfunction w(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(\" \").replace(/\\s+/g,\" \").replace(/^\\s+|\\s+$/,\"\")}function y(a,b){for(var c=a.className.split(/\\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}\nfunction ea(a){return a.o.location.hostname||a.a.location.hostname}function z(a,b,c){function d(){m&&e&&f&&(m(g),m=null)}b=t(a,\"link\",{rel:\"stylesheet\",href:b,media:\"all\"});var e=!1,f=!0,g=null,m=c||null;da?(b.onload=function(){e=!0;d()},b.onerror=function(){e=!0;g=Error(\"Stylesheet failed to load\");d()}):setTimeout(function(){e=!0;d()},0);u(a,\"head\",b)}\nfunction A(a,b,c,d){var e=a.c.getElementsByTagName(\"head\")[0];if(e){var f=t(a,\"script\",{src:b}),g=!1;f.onload=f.onreadystatechange=function(){g||this.readyState&&\"loaded\"!=this.readyState&&\"complete\"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,\"HEAD\"==f.parentNode.tagName&&e.removeChild(f))};e.appendChild(f);setTimeout(function(){g||(g=!0,c&&c(Error(\"Script load timeout\")))},d||5E3);return f}return null};function B(){this.a=0;this.c=null}function C(a){a.a++;return function(){a.a--;D(a)}}function E(a,b){a.c=b;D(a)}function D(a){0==a.a&&a.c&&(a.c(),a.c=null)};function F(a){this.a=a||\"-\"}F.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\\W_]+/g,\"\").toLowerCase());return b.join(this.a)};function G(a,b){this.c=a;this.f=4;this.a=\"n\";var c=(b||\"n4\").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function fa(a){return H(a)+\" \"+(a.f+\"00\")+\" 300px \"+I(a.c)}function I(a){var b=[];a=a.split(/,\\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['\"]/g,\"\");-1!=d.indexOf(\" \")||/^\\d/.test(d)?b.push(\"'\"+d+\"'\"):b.push(d)}return b.join(\",\")}function J(a){return a.a+a.f}function H(a){var b=\"normal\";\"o\"===a.a?b=\"oblique\":\"i\"===a.a&&(b=\"italic\");return b}\nfunction ga(a){var b=4,c=\"n\",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};function ha(a,b){this.c=a;this.f=a.o.document.documentElement;this.h=b;this.a=new F(\"-\");this.j=!1!==b.events;this.g=!1!==b.classes}function ia(a){a.g&&w(a.f,[a.a.c(\"wf\",\"loading\")]);K(a,\"loading\")}function L(a){if(a.g){var b=y(a.f,a.a.c(\"wf\",\"active\")),c=[],d=[a.a.c(\"wf\",\"loading\")];b||c.push(a.a.c(\"wf\",\"inactive\"));w(a.f,c,d)}K(a,\"inactive\")}function K(a,b,c){if(a.j&&a.h[b])if(c)a.h[b](c.c,J(c));else a.h[b]()};function ja(){this.c={}}function ka(a,b,c){var d=[],e;for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d};function M(a,b){this.c=a;this.f=b;this.a=t(this.c,\"span\",{\"aria-hidden\":\"true\"},this.f)}function N(a){u(a.c,\"body\",a.a)}function O(a){return\"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:\"+I(a.c)+\";\"+(\"font-style:\"+H(a)+\";font-weight:\"+(a.f+\"00\")+\";\")};function P(a,b,c,d,e,f){this.g=a;this.j=b;this.a=d;this.c=c;this.f=e||3E3;this.h=f||void 0}P.prototype.start=function(){var a=this.c.o.document,b=this,c=q(),d=new Promise(function(d,e){function f(){q()-c>=b.f?e():a.fonts.load(fa(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(f,25)},function(){e()})}f()}),e=null,f=new Promise(function(a,d){e=setTimeout(d,b.f)});Promise.race([f,d]).then(function(){e&&(clearTimeout(e),e=null);b.g(b.a)},function(){b.j(b.a)})};function Q(a,b,c,d,e,f,g){this.v=a;this.B=b;this.c=c;this.a=d;this.s=g||\"BESbswy\";this.f={};this.w=e||3E3;this.u=f||null;this.m=this.j=this.h=this.g=null;this.g=new M(this.c,this.s);this.h=new M(this.c,this.s);this.j=new M(this.c,this.s);this.m=new M(this.c,this.s);a=new G(this.a.c+\",serif\",J(this.a));a=O(a);this.g.a.style.cssText=a;a=new G(this.a.c+\",sans-serif\",J(this.a));a=O(a);this.h.a.style.cssText=a;a=new G(\"serif\",J(this.a));a=O(a);this.j.a.style.cssText=a;a=new G(\"sans-serif\",J(this.a));a=\nO(a);this.m.a.style.cssText=a;N(this.g);N(this.h);N(this.j);N(this.m)}var R={D:\"serif\",C:\"sans-serif\"},S=null;function T(){if(null===S){var a=/AppleWebKit\\/([0-9]+)(?:\\.([0-9]+))/.exec(window.navigator.userAgent);S=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return S}Q.prototype.start=function(){this.f.serif=this.j.a.offsetWidth;this.f[\"sans-serif\"]=this.m.a.offsetWidth;this.A=q();U(this)};\nfunction la(a,b,c){for(var d in R)if(R.hasOwnProperty(d)&&b===a.f[R[d]]&&c===a.f[R[d]])return!0;return!1}function U(a){var b=a.g.a.offsetWidth,c=a.h.a.offsetWidth,d;(d=b===a.f.serif&&c===a.f[\"sans-serif\"])||(d=T()&&la(a,b,c));d?q()-a.A>=a.w?T()&&la(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?V(a,a.v):V(a,a.B):ma(a):V(a,a.v)}function ma(a){setTimeout(p(function(){U(this)},a),50)}function V(a,b){setTimeout(p(function(){v(this.g.a);v(this.h.a);v(this.j.a);v(this.m.a);b(this.a)},a),0)};function W(a,b,c){this.c=a;this.a=b;this.f=0;this.m=this.j=!1;this.s=c}var X=null;W.prototype.g=function(a){var b=this.a;b.g&&w(b.f,[b.a.c(\"wf\",a.c,J(a).toString(),\"active\")],[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\"),b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\")]);K(b,\"fontactive\",a);this.m=!0;na(this)};\nW.prototype.h=function(a){var b=this.a;if(b.g){var c=y(b.f,b.a.c(\"wf\",a.c,J(a).toString(),\"active\")),d=[],e=[b.a.c(\"wf\",a.c,J(a).toString(),\"loading\")];c||d.push(b.a.c(\"wf\",a.c,J(a).toString(),\"inactive\"));w(b.f,d,e)}K(b,\"fontinactive\",a);na(this)};function na(a){0==--a.f&&a.j&&(a.m?(a=a.a,a.g&&w(a.f,[a.a.c(\"wf\",\"active\")],[a.a.c(\"wf\",\"loading\"),a.a.c(\"wf\",\"inactive\")]),K(a,\"active\")):L(a.a))};function oa(a){this.j=a;this.a=new ja;this.h=0;this.f=this.g=!0}oa.prototype.load=function(a){this.c=new ca(this.j,a.context||this.j);this.g=!1!==a.events;this.f=!1!==a.classes;pa(this,new ha(this.c,a),a)};\nfunction qa(a,b,c,d,e){var f=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,m=d||null||{};if(0===c.length&&f)L(b.a);else{b.f+=c.length;f&&(b.j=f);var h,l=[];for(h=0;h<c.length;h++){var k=c[h],n=m[k.c],r=b.a,x=k;r.g&&w(r.f,[r.a.c(\"wf\",x.c,J(x).toString(),\"loading\")]);K(r,\"fontloading\",x);r=null;if(null===X)if(window.FontFace){var x=/Gecko.*Firefox\\/(\\d+)/.exec(window.navigator.userAgent),xa=/OS X.*Version\\/10\\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);\nX=x?42<parseInt(x[1],10):xa?!1:!0}else X=!1;X?r=new P(p(b.g,b),p(b.h,b),b.c,k,b.s,n):r=new Q(p(b.g,b),p(b.h,b),b.c,k,b.s,a,n);l.push(r)}for(h=0;h<l.length;h++)l[h].start()}},0)}function pa(a,b,c){var d=[],e=c.timeout;ia(b);var d=ka(a.a,c,a.c),f=new W(a.c,b,e);a.h=d.length;b=0;for(c=d.length;b<c;b++)d[b].load(function(b,d,c){qa(a,f,b,d,c)})};function ra(a,b){this.c=a;this.a=b}\nra.prototype.load=function(a){function b(){if(f[\"__mti_fntLst\"+d]){var c=f[\"__mti_fntLst\"+d](),e=[],h;if(c)for(var l=0;l<c.length;l++){var k=c[l].fontfamily;void 0!=c[l].fontStyle&&void 0!=c[l].fontWeight?(h=c[l].fontStyle+c[l].fontWeight,e.push(new G(k,h))):e.push(new G(k))}a(e)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.o;A(this.c,(c.a.api||\"https://fast.fonts.net/jsapi\")+\"/\"+d+\".js\"+(e?\"?v=\"+e:\"\"),function(e){e?a([]):(f[\"__MonotypeConfiguration__\"+\nd]=function(){return c.a},b())}).id=\"__MonotypeAPIScript__\"+d}else a([])};function sa(a,b){this.c=a;this.a=b}sa.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new B;b=0;for(c=d.length;b<c;b++)z(this.c,d[b],C(g));var m=[];b=0;for(c=e.length;b<c;b++)if(d=e[b].split(\":\"),d[1])for(var h=d[1].split(\",\"),l=0;l<h.length;l+=1)m.push(new G(d[0],h[l]));else m.push(new G(d[0]));E(g,function(){a(m,f)})};function ta(a,b){a?this.c=a:this.c=ua;this.a=[];this.f=[];this.g=b||\"\"}var ua=\"https://fonts.googleapis.com/css\";function va(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(\":\");3==e.length&&a.f.push(e.pop());var f=\"\";2==e.length&&\"\"!=e[1]&&(f=\":\");a.a.push(e.join(f))}}\nfunction wa(a){if(0==a.a.length)throw Error(\"No fonts to load!\");if(-1!=a.c.indexOf(\"kit=\"))return a.c;for(var b=a.a.length,c=[],d=0;d<b;d++)c.push(a.a[d].replace(/ /g,\"+\"));b=a.c+\"?family=\"+c.join(\"%7C\");0<a.f.length&&(b+=\"&subset=\"+a.f.join(\",\"));0<a.g.length&&(b+=\"&text=\"+encodeURIComponent(a.g));return b};function ya(a){this.f=a;this.a=[];this.c={}}\nvar za={latin:\"BESbswy\",\"latin-ext\":\"\\u00e7\\u00f6\\u00fc\\u011f\\u015f\",cyrillic:\"\\u0439\\u044f\\u0416\",greek:\"\\u03b1\\u03b2\\u03a3\",khmer:\"\\u1780\\u1781\\u1782\",Hanuman:\"\\u1780\\u1781\\u1782\"},Aa={thin:\"1\",extralight:\"2\",\"extra-light\":\"2\",ultralight:\"2\",\"ultra-light\":\"2\",light:\"3\",regular:\"4\",book:\"4\",medium:\"5\",\"semi-bold\":\"6\",semibold:\"6\",\"demi-bold\":\"6\",demibold:\"6\",bold:\"7\",\"extra-bold\":\"8\",extrabold:\"8\",\"ultra-bold\":\"8\",ultrabold:\"8\",black:\"9\",heavy:\"9\",l:\"3\",r:\"4\",b:\"7\"},Ba={i:\"i\",italic:\"i\",n:\"n\",normal:\"n\"},\nCa=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;\nfunction Da(a){for(var b=a.f.length,c=0;c<b;c++){var d=a.f[c].split(\":\"),e=d[0].replace(/\\+/g,\" \"),f=[\"n4\"];if(2<=d.length){var g;var m=d[1];g=[];if(m)for(var m=m.split(\",\"),h=m.length,l=0;l<h;l++){var k;k=m[l];if(k.match(/^[\\w-]+$/)){var n=Ca.exec(k.toLowerCase());if(null==n)k=\"\";else{k=n[2];k=null==k||\"\"==k?\"n\":Ba[k];n=n[1];if(null==n||\"\"==n)n=\"4\";else var r=Aa[n],n=r?r:isNaN(n)?\"4\":n.substr(0,1);k=[k,n].join(\"\")}}else k=\"\";k&&g.push(k)}0<g.length&&(f=g);3==d.length&&(d=d[2],g=[],d=d?d.split(\",\"):\ng,0<d.length&&(d=za[d[0]])&&(a.c[e]=d))}a.c[e]||(d=za[e])&&(a.c[e]=d);for(d=0;d<f.length;d+=1)a.a.push(new G(e,f[d]))}};function Ea(a,b){this.c=a;this.a=b}var Fa={Arimo:!0,Cousine:!0,Tinos:!0};Ea.prototype.load=function(a){var b=new B,c=this.c,d=new ta(this.a.api,this.a.text),e=this.a.families;va(d,e);var f=new ya(e);Da(f);z(c,wa(d),C(b));E(b,function(){a(f.a,f.c,Fa)})};function Ga(a,b){this.c=a;this.a=b}Ga.prototype.load=function(a){var b=this.a.id,c=this.c.o;b?A(this.c,(this.a.api||\"https://use.typekit.net\")+\"/\"+b+\".js\",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],m=b[f+1],h=0;h<m.length;h++)e.push(new G(g,m[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(l){}a(e)}},2E3):a([])};function Ha(a,b){this.c=a;this.f=b;this.a=[]}Ha.prototype.load=function(a){var b=this.f.id,c=this.c.o,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,m=c.fonts.length;g<m;++g){var h=c.fonts[g];d.a.push(new G(h.name,ga(\"font-weight:\"+h.weight+\";font-style:\"+h.style)))}a(d.a)},A(this.c,(this.f.api||\"https://f.fontdeck.com/s/css/js/\")+ea(this.c)+\"/\"+b+\".js\",function(b){b&&a([])})):a([])};var Y=new oa(window);Y.a.c.custom=function(a,b){return new sa(b,a)};Y.a.c.fontdeck=function(a,b){return new Ha(b,a)};Y.a.c.monotype=function(a,b){return new ra(b,a)};Y.a.c.typekit=function(a,b){return new Ga(b,a)};Y.a.c.google=function(a,b){return new Ea(b,a)};var Z={load:p(Y.load,Y)};\"function\"===typeof define&&define.amd?define(function(){return Z}):\"undefined\"!==typeof module&&module.exports?module.exports=Z:(window.WebFont=Z,window.WebFontConfig&&Y.load(window.WebFontConfig));}());\n"],"sourceRoot":""}