!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";var n,a=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i};Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){function t(t,r){var n=e.call(this,"Unexpected URL format. "+t+" does not match "+r)||this;return n.url=t,n.expectedFormat=r,n}return a(t,e),t}(Error);function u(){return new URLSearchParams(location.search).get("url")}function c(e){void 0===e&&(e=u());var t=/^.+\/arcgis\/rest(\/services)?/,r=e.match(t);if(!r)throw new i(e,t);return r[1]?r[0]:r[0]+"/services"}t.UnexpectedUrlFormatError=i,t.getServerRoot=c,t.getServiceUrl=function(e){void 0===e&&(e=u());var t=/^.+\/arcgis\/rest\/services(?:\/\w+){1,2}\/(?:\w+Server)/i,r=e.match(t);if(!r)throw new i(e,t);return r[0]},t.wrapUrl=function(e,t){void 0===t&&(t=location.href);var r=new URL(t);return r.searchParams.set("url",e),r.toString()},t.getServiceUrlParts=function(e){if(void 0===e&&(e=u()),!e)return null;var t=/(^.+\/arcgis\/rest\/services)(?:(?:\/)(?:(\w+)\/)?(\w+)\/(\w+Server)(?:\/(\d+))?)?/,r=e.match(t);if(r){var n=o(r,6),a=n[1],l=n[2],s=n[3],f=n[4],d=n[5],p=s?a+"/"+(l?[l,s].join("/"):s)+"/"+f:null;return{root:a,folder:l?a+"/"+l:null,service:p,layer:p&&d?p+"/"+d:null,tool:null}}var h=e.match(/(^.+\/arcgis\/rest\/services)(?:(?:\/)(?:(\w+)\/)?(\w+)\/(\w+Server)(?:\/([^\/]+))?)?/);if(h){var m=o(h,6),v=(a=m[1],l=m[2],s=m[3],f=m[4],m[5]);return p=s?a+"/"+(l?[l,s].join("/"):s)+"/"+f:null,{root:a,folder:l?a+"/"+l:null,service:p,layer:null,tool:p&&v?p+"/"+v:null}}var y=c();if(!y)throw new i(e,t);return{root:y,folder:null,service:null,layer:null,tool:null}}},function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i};function a(e){return"#"+e.map(function(e){return e.toString(16)}).join("")}Object.defineProperty(t,"__esModule",{value:!0}),t.isHexString=function(e){return!!e&&/^[0-9a-f]+$/i.test(e)},t.rgbToHex=a,t.rgbaArrayToCssRgb=function(e){var t=n(e,3),r=t[0],a=t[1],o=t[2],i=n(e,4)[3];return"rgba("+[r,a,o,i/=255].join(",")+")"},t.colorToDom=function(e){var t=n(e,3),r=t[0],o=t[1],i=t[2];n(e,4)[3];var u=document.createElement("input");return u.type="color",u.value=a([r,o,i]),u.disabled=!0,u}},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(i,u)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}},i=this;Object.defineProperty(t,"__esModule",{value:!0});var u=r(1),c=r(3),l=r(4),s=r(0);function f(e,t){if(t){if(/^(fields)|(layers)|(tables)|(codedValues)|(lods)|(indexes)|(relationships)|(((symbol)|(sub))Layers)|((sub)?types)$/.test(t))return function(e,t){var r,n,a=document.createElement("table");t&&a.classList.add("property--"+t);var i=a.createTHead().insertRow(),u=a.createTBody(),c=new Set;try{for(var l=o(e),f=l.next();!f.done;f=l.next()){var p=f.value;for(var h in p)p.hasOwnProperty(h)&&c.add(h)}}catch(e){r={error:e}}finally{try{f&&!f.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return c.forEach(function(e){var t=document.createElement("th");t.innerText=e,i.appendChild(t)}),e.forEach(function(e){var t=u.insertRow();c.forEach(function(r){var n=e[r],a=t.insertCell();if("name"===r&&e.hasOwnProperty("id")){var o=document.createElement("a"),i=s.getServiceUrl(),u=new URL(location.href);u.searchParams.set("url",i+"/"+e.id),o.href=u.toString(),o.innerText=n,a.appendChild(o)}else if("domain"===r){var c=d(n);c&&a.appendChild(c)}else if(/^(string)|(number)/.test(typeof n))a.innerText=n;else{var l=d(n,r);l&&a.appendChild(l)}})}),u.childElementCount?a:null}(e,t);if(/^(folders)|(services)/.test(t)){var r=document.createElement("ul");return e.forEach(function(e){var t=document.createElement("a"),n=new URLSearchParams({url:e.url});t.href=new URL("?"+n.toString(),location.href).toString(),t.textContent=e.name;var a=document.createElement("li");a.appendChild(t),r.appendChild(a)}),r}if("legend"===t)return c.createLegendList(e);if("tasks"===t){var n=s.getServiceUrl(),a=e.map(function(e){var t=document.createElement("a");t.href=s.wrapUrl(n+"/"+e),t.textContent=e;var r=document.createElement("li");return r.appendChild(t),r}),i=document.createElement("ul");return a.forEach(function(e){return i.appendChild(e)}),i}if("color"===t)return u.colorToDom(e)}var l=document.createElement("ul");return t&&l.classList.add("property--"+t),e.map(function(e){var t=d(e);if(t){var r=document.createElement("li");return r.appendChild(t),r}}).filter(function(e){return void 0!==e}).forEach(function(e){return l.appendChild(e)}),l}function d(e,t){if(null==e)return document.createTextNode(null===e?"null":"undefined");if(e instanceof Element)return e;if(t){var r;if(e&&/Url$/i.test(t)&&!/^[0-9a-f]+$/i.test(e))return(r=document.createElement("a")).textContent=e,r.href=e,r;if(/^(?:latest)?[Ww]kid$/.test(t))return(r=document.createElement("a")).innerText=e,r.href="https://epsg.io/"+e,r.target="epsg",r;if("datumTransformations"===t)return function(e){var t=document.createElement("table");t.classList.add("property--datumTransformations");var r=t.createTHead().insertRow(),n=t.createTBody();return["id"].concat(["name","transformForward","wkid","latestWkid"]).forEach(function(e){var t=document.createElement("th");t.innerText=e,r.appendChild(t)}),e.forEach(function(e,t){e.geoTransforms.forEach(function(e){var r=[t,e.name,e.transformForward,e.wkid,e.latestWkid],a=n.insertRow();r.forEach(function(t,r){var n=a.insertCell();1===r?n.appendChild(function(e,t,r){var n=document.createElement("a");n.innerText=e,n.target="epsg";var a="https://epsg.io/"+(r||t);return n.href=a,n}(e.name,e.wkid,e.latestWkid)):n.innerText=""+t})})}),new Set(Array.from(n.rows,function(e){return parseInt(e.cells[0].innerText,10)})).forEach(function(e){var t=Array.from(n.rows).map(function(e){return e.cells[0]}).filter(function(t){if(!t.innerText)return!1;var r=parseInt(t.innerText,10);return e===r}),r=t.length;r>1&&(t[0].rowSpan=r,t.splice(1).forEach(function(e){var t=e.parentElement;t&&t.removeChild(e)}))}),t}(e)}var n=l.symbolToDom(e);if(n)return n;if(Array.isArray(e))return f(e,t);if("boolean"==typeof e)return document.createTextNode(e?"true":"false");if(/^(string)|(number)$/.test(typeof e)||e instanceof Date)return document.createTextNode(""+e);var a=document.createElement("dl");for(var o in e)if(e.hasOwnProperty(o)){var i=e[o],u=document.createElement("dt");u.innerText=o;var c=document.createElement("dd"),s=d(i,o);s&&c.appendChild(s),[u,c].forEach(function(e){return a.appendChild(e)})}return a}function p(e){return n(this,void 0,void 0,function(){var t,r,n;return a(this,function(a){switch(a.label){case 0:return[4,fetch(e+"?f=json")];case 1:return[4,a.sent().text()];case 2:return t=a.sent(),r=s.getServerRoot(e),n=function(e,t){return/^(supported\w+Format\w*)|(Keywords)|(capabilities)$/i.test(e)&&"string"==typeof t?t?t.split(/[,\s]+/g):"":"folders"===e?t.map(function(e){return{name:e,url:r+"/"+e}}):"services"===e?t.map(function(e){return{name:e.name,url:r+"/"+e.name+"/"+e.type}}):"timeExtent"===e?t.map(function(e){return new Date(e).toISOString()}):t},[2,JSON.parse(t,n)]}})})}!function(){var e=s.getServiceUrlParts();if(e){var t=document.createElement("nav"),r=document.createElement("ol");for(var n in t.appendChild(r),t.classList.add("breadcrumbs"),e)if(e.hasOwnProperty(n)){var a=e[n];if(!a)continue;var o=document.createElement("li");o.classList.add("breadcrumbs__item");var i=document.createElement("a");i.classList.add("breadcrumbs__item__anchor");var u=new URL(location.href);u.searchParams.set("url",a),i.href=u.toString(),i.innerText=n,o.appendChild(i),r.appendChild(o)}document.body.querySelector("header").appendChild(t)}}(),n(i,void 0,void 0,function(){var e,t,r,n,o,i,u;return a(this,function(a){switch(a.label){case 0:return e=new URLSearchParams(location.search),(t=e.get("url"))?((r=document.querySelector("form > input[name='url']"))&&(r.value=t),(n=document.querySelector("#main"))||console.warn("couldn't find main section"),(o=function(e){var t=s.getServiceUrlParts(e),r=t.service,n=t.tool,a=t.layer;if(r&&!n&&!a&&!/GPServer/.test(r)){var o=["legend","layers","info/iteminfo"].map(function(e){return c(e,!0)}),i=document.createElement("ul");return o.forEach(u),(o=["metadata","thumbnail"].map(function(e){return c("info/"+e,!1)})).forEach(u),i}function u(e){var t=document.createElement("li");t.appendChild(e),i.appendChild(t)}function c(e,t){var n=document.createElement("a");n.textContent=e;var a=r+"/"+e;return t?a=s.wrapUrl(a):n.target="_blank",n.href=a,n}}(t))&&n.appendChild(o),[4,p(t)]):[2];case 1:return i=a.sent(),(u=d(i))&&n.appendChild(u),[2]}})})},function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,o){function i(e){try{c(n.next(e))}catch(e){o(e)}}function u(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(i,u)}c((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var r,n,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,n=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},o=this&&this.__values||function(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(0);function u(e){var t="data:"+e.contentType+";base64,"+e.imageData,r=document.createElement("img");return r.src=t,r.alt=e.label||"unnamed legend symbol",r.width=e.width,r.height=e.height,r}function c(e){var t,r;if(1===e.length&&!e[0].label)return u(e[0]);var n=document.createElement("dl");try{for(var a=o(e),i=a.next();!i.done;i=a.next()){var c=i.value,l=u(c),s=document.createElement("dt");s.textContent=c.label;var f=document.createElement("dd");f.appendChild(l),[s,f].forEach(function(e){return n.appendChild(e)})}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return n}function l(e){var t,r,n=document.createDocumentFragment(),a=e.layers;try{for(var i=o(a),u=i.next();!u.done;u=i.next()){var l=u.value,s=document.createElement("h2");if(s.textContent=l.layerId+". "+l.layerName+" ("+l.layerType+")",n.appendChild(s),l.minScale||l.maxScale){var f=document.createElement("p");f.textContent="Scale: "+l.minScale+" to "+l.maxScale,n.appendChild(f)}l.legend&&n.appendChild(c(l.legend))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n}t.createLegendList=c,t.createLegendDom=l,t.getLegend=function(e,t){return n(this,void 0,void 0,function(){var r,n,o,u;return a(this,function(a){switch(a.label){case 0:(r=document.createElement("progress")).textContent="loading legend...",e.replaceWith(r),a.label=1;case 1:return a.trys.push([1,4,,5]),n=i.getServiceUrl(t),t=n+"/legend?f=json",[4,fetch(t)];case 2:return[4,a.sent().json()];case 3:return o=a.sent(),u=l(o),r.replaceWith(u),[3,5];case 4:return a.sent(),r.parentElement&&r.remove(),[3,5];case 5:return[2]}})})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),a=r(0);function o(e,t){return(t=a.getServiceUrlParts(t).layer)+"/images/"+e}function i(e){var t=null;if(e.imageData&&e.contentType?t="data:"+e.contentType+";base64,"+e.imageData:n.isHexString(e.url)&&(t=o(e.url)),t){var r=document.createElement("img");r.src=t,r.alt="legend symbol",["width","height"].forEach(function(t){var n=e.hasOwnProperty(t)?e[t]:null;n&&r.setAttribute(t,n)});var a=e;if(a.outline){var i=a.outline,u=i.color,c=i.width,l=a.outline.style;l&&(l=l.replace(/^esriSLS/,"").toLowerCase(),/null/.test(l)?l=void 0:r.style.borderStyle=l),u&&(r.style.borderColor=n.rgbaArrayToCssRgb(u)),void 0!==c&&(r.style.borderWidth=c+"px")}return r}return null}t.toSymbolUrl=o,t.pictureSymbolToImage=i,t.symbolToDom=function(e){return/^esriP[MF]S$/.test(e.type)?i(e):null}}]);
//# sourceMappingURL=index.js.map